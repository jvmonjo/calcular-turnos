<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Aplicación para calcular y gestionar turnos de trabajo">
  <meta name="theme-color" content="#667eea">

  <title>Calculadora de turnos</title>

  <!-- PWA Manifest -->
  <link rel="manifest" href="./manifest.json">

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="./icons/icon.svg">
  <link rel="apple-touch-icon" href="./icons/icon-192x192.png">

  <!-- CSS -->
  <link rel="stylesheet" href="./css/styles.css">
</head>
<body>
  <div class="container">
    <h1>Calculadora de Turnos</h1>

    <div class="config-section">

      <button id="toggleConfig" class="secondary">Personalizar Patrón</button>

      <div id="configPanel" style="display: none;">
        <div class="form-group">
          <label for="duracionCiclo">Duración del ciclo (días):</label>
          <input type="number" id="duracionCiclo" min="1" max="365" value="28">
        </div>

        <div class="form-group">
          <label>Nombres de los turnos (separados por comas):</label>
          <input type="text" id="nombresTurnos" value="A,V,L" placeholder="Ej: A,V,L">
          <small>Por defecto: A=Azul, V=Verde, L=Libre</small>
        </div>

        <div class="form-group">
          <label for="patronTurnos">Patrón de turnos (usa los nombres definidos arriba):</label>
          <textarea id="patronTurnos" rows="4" placeholder="Introduce el patrón separado por comas">A,L,V,L,A,A,A,L,V,L,A,L,L,L,V,L,A,L,V,V,V,L,A,L,V,L,L,L</textarea>
          <small>Debe tener exactamente la misma cantidad de días que la duración del ciclo</small>
        </div>

        <div class="button-group">
          <button type="button" id="guardarConfig" class="primary">Guardar Configuración</button>
          <button type="button" id="resetConfig" class="tertiary">Restaurar Por Defecto</button>
        </div>

        <div id="configMensaje"></div>
      </div>
    </div>

    <form id="turnoForm">
      <div class="form-group">
        <label for="inicio">Fecha de inicio:</label>
        <input type="date" id="inicio" required>
      </div>

      <div class="form-group">
        <label for="turnoInicio">Turno correspondiente a la fecha de inicio:</label>
        <select id="turnoInicio" required>
          <!-- Se poblará dinámicamente según la configuración -->
        </select>
      </div>

      <div class="form-group">
        <label for="fecha">Fecha para calcular:</label>
        <input type="date" id="fecha" required>
      </div>

      <div class="button-group">
        <button type="submit" class="primary">Calcular Turno</button>
      </div>
    </form>

    <div id="resultado"></div>

    <div class="export-section">
      <h2>Exportar Turnos Anuales</h2>
      <div class="button-group">
        <button id="exportarCSV" class="secondary">Exportar CSV</button>
        <button id="exportarPDF" class="tertiary">Exportar PDF</button>
        <button id="exportarICS" class="quaternary">Exportar ICS (Calendar)</button>
      </div>
    </div>
  </div>

  <!-- JavaScript Libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>

  <!-- Application JavaScript -->
  <script src="./js/version.js"></script>
  <script src="./js/turnos.js"></script>
  <script src="./js/config.js"></script>
  <script src="./js/export-csv.js"></script>
  <script src="./js/export-pdf.js"></script>
  <script src="./js/export-ics.js"></script>
  <script src="./js/update-manager.js"></script>
  <script src="./js/app.js"></script>
</body>
</html>
